<section class="post clearfix" jw-post>
  <div ng-if="post.images[0] === nil" class="white-carbon"></div>
  <div ng-if="post.image !== '/images/medium/missing.png'" class="featured-image" style="background: url({{post.images[0].url}}) no-repeat center top; background-size:cover;"></div>
  <div class="post-content clearfix container">
    <div class="grid_12 clearfix">
      <h1 ng-bind-html="post.title"></h1>
      <p class="date">{{ post.created_at | date }}</p>
    </div>
    <div class="body grid_16" ng-bind-html="post.body"></div>
    <div class="meta grid_16">
      <p><a class="btn" ng-repeat="category in post.categories">{{category}}</a></p>
    </div>
  </div>
</section>

<section ng-if="isLoggedIn()" class="post-edit container clearfix">
  <div class="grid_16">
    <h3>Edit this blog post:</h3>
    <p>{{message}}</p>
    <form role="form" name="postForm" ng-submit="upsertPost(post)" enctype="multipart/form-data" novalidate>
      <div class="form-group">
        <label for="title">Title</label>
        <input type="text" name="title" ng-bind-html="post.title" ng-model="post.title">
      </div>
      <div class="form-group">
        <label for="body">Body</label>
        <textarea name="body" ng-model="post.body" ng-bind-html="post.body"></textarea>
      </div>
      <div class="form-group clearfix">
        <div class="grid_4 checkbox-group" ng-repeat="category in categories">
          <input type="checkbox" ng-model="category.checked" name="category.id">
          <label for="{{category.name}}">{{category.name}}</label>
        </div>
      </div>
      <div id="imageUpload" class="form-group">
        <input type="hidden" name="key" value="key">
        <input type="hidden" name="AWSAccessKeyId" value="access_key"> 
        <input type="hidden" name="acl" value="public-read"> 
        <input type="hidden" name="policy" value="policy">
        <input type="hidden" name="signature" value="signature">
        <input type="hidden" name="Content-Type" value="image/jpeg">
        File to upload to S3: 
        <input name="file" type="file"> 
      </div>
      <div class="form-group">
        <button class="btn btn-default" ng-click="clearForm()">Reset</button>
        <button class="btn btn-default" type="submit" ng-disabled="postForm.$invalid">Submit</button>  
      </div>
    </form>
  </div>
</section>