<section class="post clearfix">
  <div ng-if="post.images.length === 0" class="black-carbon"></div>
  <div ng-if="post.images.length > 0" class="featured-image" style="background: url({{post.images[0].url}}) no-repeat center top; background-size:cover;"></div>
  <div class="post-content clearfix container">
    <div class="grid_12 clearfix">
      <h1 ng-bind-html="post.title"></h1>
    </div>
    <div class="body grid_16 clearfix">
      <div class="post-body grid_12" ng-bind-html="post.body"></div>
      <div class="post-sidebar grid_4">
        <p class="date"><strong>Created on: </strong>{{ post.created_at | date }}</p>  
        <p ng-if="post.categories.length > 0"><strong>Filed under: </strong><br><a class="btn" ng-repeat="category in post.categories">{{category.name}}</a></p>
      </div>
      <div class="post-images" post-gallery>
        <img ng-repeat="image in post.images" src="{{image.url}}" alt="{{image.id}}">
      </div>
    </div>
  </div>
</section>

<section ng-if="isLoggedIn()" class="post-edit clearfix">
  <div class="container">
    <div class="grid_16">
      <h3>Edit this blog post:</h3>
      <p>{{message}}</p>
      <form role="form" name="postForm" ng-submit="upsertPost(post)" enctype="multipart/form-data" novalidate>
        <div class="form-group">
          <label for="title">Title</label>
          <input type="text" name="title" ng-bind-html="post.title" ng-model="post.title">
        </div>
        <div class="form-group">
          <label for="body">Body</label>
          <textarea name="body" ng-model="post.body" ng-bind-html="post.body"></textarea>
        </div>
        <div class="form-group clearfix">
          <div class="checkbox-group" ng-repeat="category in categories">
            <label for="{{category.name}}">
              <input type="checkbox" ng-checked="hasCategory(category)" ng-model="category.checked" name="category.id">{{category.name}}
            </label>
          </div>
        </div>
        <div id="imageUpload" class="form-group">
          <input type="hidden" name="key" value="key">
          <input type="hidden" name="AWSAccessKeyId" value="access_key"> 
          <input type="hidden" name="acl" value="public-read"> 
          <input type="hidden" name="policy" value="policy">
          <input type="hidden" name="signature" value="signature">
          <input type="hidden" name="Content-Type" value="image/jpeg">
          File to upload to S3: 
          <input name="file" type="file"> 
        </div>
        <div class="form-group">
          
          <button class="btn btn-default" type="submit" ng-disabled="postForm.$invalid">Save Post</button>  |   <button class="btn btn-primary" ng-click="deletePost(post)" type="submit">Delete Post</button>
        </div>
      </form>
    </div>  
  </div>
</section>